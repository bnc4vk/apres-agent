<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Apres AI</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="app">
      <header>
        <div class="brand-row">
          <h1>Apres AI</h1>
          <button id="new-chat-btn" type="button" class="secondary-btn">New trip</button>
        </div>
        <p id="page-subhead">Share what you know. I can make assumptions when details are sparse.</p>
      </header>

      <main id="experience-root" class="experience-root" aria-live="polite">
        <section id="intake-screen" class="screen intake-screen" aria-label="Trip setup">
          <div class="screen-shell intake-shell">
            <div class="screen-header">
              <h2>Trip setup</h2>
              <p>
                Enter the trip details directly, then generate itinerary options. We will focus the AI on planning
                quality first and enable refinement chat after results.
              </p>
            </div>

            <form id="trip-intake-form" class="trip-intake-form">
              <div class="field-grid">
                <div class="field-column">
                  <section class="field-card">
                    <h3>Dates and location</h3>
                    <div id="trip-date-range-picker" class="date-range-picker" aria-label="Trip date range calendar"></div>
                    <p class="field-helper">Pick a start and end date on the calendar, or edit the fields below.</p>
                    <label class="checkbox-line">
                      <input name="flexible_dates_enabled" type="checkbox" disabled />
                      Flexible dates (coming soon)
                    </label>
                    <label>
                      Start date
                      <input id="trip-start-date" name="start_date" type="date" required />
                    </label>
                    <label>
                      End date
                      <input id="trip-end-date" name="end_date" type="date" required />
                    </label>
                    <label class="checkbox-line">
                      <input name="open_to_suggestions" type="checkbox" />
                      Open to destination suggestions
                    </label>
                    <label>
                      Destination / region preference (optional)
                      <input name="destination_preference" type="text" placeholder="Utah, Tahoe, Aspen..." />
                    </label>
                  </section>

                  <section class="field-card">
                    <h3>Group</h3>
                    <label>
                      Group size
                      <input name="group_size" type="number" min="1" max="40" step="1" required placeholder="8" />
                    </label>
                    <label>
                      Group type
                      <select name="group_rider_mix">
                        <option value="" selected>Select group type...</option>
                        <option value="hybrid">Hybrid (skiers + snowboarders)</option>
                        <option value="skiers">Skiers</option>
                        <option value="snowboarders">Snowboarders</option>
                      </select>
                    </label>
                    <fieldset>
                      <legend>Skill levels (select all that apply)</legend>
                      <div class="check-grid">
                        <label><input type="checkbox" name="skill_levels" value="beginner" /> Beginner</label>
                        <label><input type="checkbox" name="skill_levels" value="intermediate" /> Intermediate</label>
                        <label><input type="checkbox" name="skill_levels" value="advanced" /> Advanced</label>
                        <label><input type="checkbox" name="skill_levels" value="expert" /> Expert</label>
                      </div>
                    </fieldset>
                  </section>

                  <section class="field-card">
                    <h3>Travel</h3>
                    <label>
                      Travel mode
                      <select name="travel_mode">
                        <option value="" selected>Select travel mode...</option>
                        <option value="flexible">Can fly or drive</option>
                        <option value="drive_only">Drive only</option>
                        <option value="mixed_driver_required">Some can fly, but at least 1 must drive</option>
                      </select>
                    </label>
                    <label>
                      Max drive hours (optional)
                      <input name="max_drive_hours" type="number" min="1" max="24" step="1" placeholder="6" />
                    </label>
                  </section>
                </div>

                <div class="field-column field-column-fill-last">
                  <section class="field-card">
                    <h3>Budget</h3>
                    <label>
                      Per-person max (USD)
                      <input name="budget_per_person" type="number" min="100" step="50" required placeholder="1800" />
                    </label>
                    <label>
                      Pass ownership
                      <select name="pass_preset">
                        <option value="" selected>Select pass ownership...</option>
                        <option value="none">No passes</option>
                        <option value="ikon">Mostly Ikon</option>
                        <option value="epic">Mostly Epic</option>
                        <option value="explicit_breakdown">Explicit breakdown</option>
                      </select>
                    </label>
                    <label id="pass-breakdown-field" hidden>
                      Pass breakdown
                      <textarea
                        name="pass_breakdown"
                        rows="3"
                        placeholder="Example: 2 Ikon, 1 Epic, 3 no pass"
                      ></textarea>
                    </label>
                  </section>

                  <section class="field-card">
                    <h3>Lodging</h3>
                    <label>
                      Shared lodging style
                      <select name="lodging_style_preference">
                        <option value="" selected>Select lodging style...</option>
                        <option value="flexible">Flexible / mixed</option>
                        <option value="shared_house">Large shared house</option>
                        <option value="separate_rooms">Separate rooms in a lodge/hotel</option>
                      </select>
                    </label>
                    <label>
                      Minimum bedrooms (optional)
                      <input name="min_bedrooms" type="number" min="1" step="1" placeholder="3" />
                    </label>
                    <label>
                      Max walk minutes to lift (optional)
                      <input name="max_walk_minutes" type="number" min="1" step="1" placeholder="10" />
                    </label>
                    <div class="check-grid">
                      <label><input name="hot_tub_required" type="checkbox" /> Hot tub</label>
                      <label><input name="kitchen_required" type="checkbox" /> Kitchen</label>
                      <label><input name="laundry_required" type="checkbox" /> Laundry</label>
                    </div>
                  </section>

                  <section class="field-card">
                    <h3>Gear rental</h3>
                    <label>
                      Rental gear needed?
                      <select name="rental_required">
                        <option value="" selected>Select rental need...</option>
                        <option value="unknown">Not sure</option>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                      </select>
                    </label>
                    <label>
                      Rental count (optional)
                      <input name="rental_count" type="number" min="1" step="1" placeholder="2" />
                    </label>
                    <label>
                      Rental type
                      <select name="rental_type">
                        <option value="" selected>Select rental type...</option>
                        <option value="both">Both</option>
                        <option value="skiers">Skiers</option>
                        <option value="snowboarders">Snowboarders</option>
                      </select>
                    </label>
                  </section>
                </div>
              </div>

              <div class="intake-footer">
                <p id="intake-error" class="intake-error" role="alert" hidden></p>
                <div class="intake-actions">
                  <button id="generate-itineraries-btn" type="submit" class="primary-btn">Generate itineraries</button>
                </div>
              </div>
            </form>
          </div>
        </section>

        <section id="loading-screen" class="screen loading-screen" aria-label="Generating itineraries" hidden>
          <div class="screen-shell loading-shell">
            <div class="loader-orb" aria-hidden="true">
              <span></span>
              <span></span>
              <span></span>
            </div>
            <h2>Generating itinerary options</h2>
            <p id="loading-status-text">Reviewing trip constraints and building ranked itinerary candidates.</p>
          </div>
        </section>

        <section id="results-screen" class="screen results-screen" aria-label="Generated itineraries" hidden>
          <div class="results-layout">
            <section id="actions" class="actions" aria-label="Itinerary actions"></section>

            <aside class="refinement-panel" aria-label="Refinements">
              <div class="refinement-panel-header">
                <h2>Refine with chat</h2>
                <p>Natural-language refinements are temporarily disabled while we improve itinerary generation quality.</p>
              </div>

              <section id="chat" class="chat chat-log-hidden" aria-label="Conversation log" hidden></section>

              <form id="chat-form" class="chat-form refinement-form" aria-disabled="true">
                <input
                  id="chat-input"
                  type="text"
                  placeholder="Refinements coming soon (e.g., 'make option 2 cheaper and more beginner-friendly')"
                  autocomplete="off"
                  aria-label="Itinerary refinement message"
                  disabled
                />
                <button type="submit" disabled>Refine (Soon)</button>
              </form>
            </aside>
          </div>
        </section>
      </main>
    </div>
    <script type="module" src="/app.js"></script>
  </body>
</html>

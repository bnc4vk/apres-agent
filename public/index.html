<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trip Setup</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <main class="page-shell">
      <section class="panel">
        <header class="page-header">
          <div class="header-main">
            <p class="eyebrow">Trip planner</p>
            <h1>Trip setup</h1>
            <p class="subhead">
              Share your dates, group, and preferences. We will generate tailored ski trip options in one step.
            </p>
          </div>
        </header>

        <form id="trip-intake-form" class="trip-intake-form">
          <div class="field-grid">
            <div class="field-column">
              <section class="field-card">
                <h2>Dates and location</h2>
                <div id="trip-date-range-picker" class="date-range-picker" aria-label="Trip date range calendar"></div>
                <p class="field-helper">Pick a start and end date on the calendar, or edit the fields below.</p>
                <label class="checkbox-line muted-line">
                  <input name="flexible_dates_enabled" type="checkbox" disabled />
                  Flexible dates (disabled in this minimal version)
                </label>
                <div class="manual-date-fields">
                  <p class="field-subheading">Manual date edit</p>
                  <label>
                    Start date
                    <input id="trip-start-date" name="start_date" type="date" required />
                  </label>
                  <label>
                    End date
                    <input id="trip-end-date" name="end_date" type="date" required />
                  </label>
                </div>
                <p id="date-range-hint" class="inline-hint" hidden></p>
                <label class="checkbox-line">
                  <input id="open-to-suggestions" name="open_to_suggestions" type="checkbox" />
                  Open to destination suggestions
                </label>
                <label id="destination-field">
                  Destination / region preference (optional)
                  <input id="destination-preference" name="destination_preference" type="text" placeholder="Utah, Tahoe, Aspen..." />
                </label>
                <p id="destination-hint" class="inline-hint" hidden></p>
              </section>

              <section class="field-card">
                <h2>Group</h2>
                <label>
                  Group size
                  <input name="group_size" type="number" min="1" max="40" step="1" required placeholder="8" />
                </label>
                <label>
                  Group type
                  <select name="group_rider_mix">
                    <option value="" selected>Select group type...</option>
                    <option value="hybrid">Hybrid (skiers + snowboarders)</option>
                    <option value="skiers">Skiers</option>
                    <option value="snowboarders">Snowboarders</option>
                  </select>
                </label>
                <fieldset>
                  <legend>Skill levels</legend>
                  <div class="check-grid">
                    <label><input type="checkbox" name="skill_levels" value="beginner" /> Beginner</label>
                    <label><input type="checkbox" name="skill_levels" value="intermediate" /> Intermediate</label>
                    <label><input type="checkbox" name="skill_levels" value="advanced" /> Advanced</label>
                    <label><input type="checkbox" name="skill_levels" value="expert" /> Expert</label>
                  </div>
                </fieldset>
                <p id="skills-hint" class="inline-hint" hidden></p>
              </section>

              <section class="field-card">
                <h2>Travel</h2>
                <label>
                  Travel mode
                  <select id="travel-mode" name="travel_mode">
                    <option value="" selected>Select travel mode...</option>
                    <option value="flexible">Can fly or drive</option>
                    <option value="drive_only">Drive only</option>
                    <option value="mixed_driver_required">Some can fly, but at least 1 must drive</option>
                  </select>
                </label>
                <label id="max-drive-hours-field" hidden>
                  Max drive hours (optional)
                  <input id="max-drive-hours" name="max_drive_hours" type="number" min="1" max="24" step="1" placeholder="6" />
                </label>
                <p id="travel-hint" class="inline-hint" hidden></p>
              </section>
            </div>

            <div class="field-column">
              <section class="field-card">
                <h2>Budget</h2>
                <label>
                  Per-person max (USD)
                  <input name="budget_per_person" type="number" min="100" step="50" required placeholder="1500" />
                </label>
                <label>
                  Pass ownership
                  <select name="pass_preset" id="pass-preset">
                    <option value="" selected>Select pass ownership...</option>
                    <option value="none">No passes</option>
                    <option value="ikon">Mostly Ikon</option>
                    <option value="epic">Mostly Epic</option>
                    <option value="explicit_breakdown">Explicit breakdown</option>
                  </select>
                </label>
                <label id="pass-breakdown-field" hidden>
                  Pass breakdown
                  <textarea
                    name="pass_breakdown"
                    rows="3"
                    placeholder="Example: 2 Ikon, 1 Epic, 3 no pass"
                  ></textarea>
                </label>
              </section>

              <section class="field-card">
                <h2>Lodging</h2>
                <label>
                  Shared lodging style
                  <select name="lodging_style_preference">
                    <option value="" selected>Select lodging style...</option>
                    <option value="flexible">Flexible / mixed</option>
                    <option value="shared_house">Large shared house</option>
                    <option value="separate_rooms">Separate rooms in a lodge/hotel</option>
                  </select>
                </label>
                <details id="lodging-advanced" class="field-expander">
                  <summary>Advanced lodging filters</summary>
                  <div class="field-expander-body">
                    <label>
                      Minimum bedrooms (optional)
                      <input name="min_bedrooms" type="number" min="1" step="1" placeholder="3" />
                    </label>
                    <label>
                      Max walk minutes to lift (optional)
                      <input name="max_walk_minutes" type="number" min="1" step="1" placeholder="10" />
                    </label>
                    <p class="field-subheading">Amenities</p>
                    <div class="check-grid">
                      <label><input name="hot_tub_required" type="checkbox" /> Hot tub</label>
                      <label><input name="kitchen_required" type="checkbox" /> Kitchen</label>
                      <label><input name="laundry_required" type="checkbox" /> Laundry</label>
                    </div>
                  </div>
                </details>
              </section>

              <section class="field-card">
                <h2>Gear rental</h2>
                <label>
                  Rental gear needed?
                  <select id="rental-required" name="rental_required">
                    <option value="" selected>Select rental need...</option>
                    <option value="unknown">Not sure</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                  </select>
                </label>
                <label id="rental-count-field" hidden>
                  Rental count (optional)
                  <input name="rental_count" type="number" min="1" step="1" placeholder="2" />
                </label>
                <label id="rental-type-field" hidden>
                  Rental type
                  <select name="rental_type">
                    <option value="" selected>Select rental type...</option>
                    <option value="both">Both</option>
                    <option value="skiers">Skiers</option>
                    <option value="snowboarders">Snowboarders</option>
                  </select>
                </label>
                <p id="rental-hint" class="inline-hint" hidden></p>
              </section>
            </div>
          </div>

          <div class="form-footer">
            <p id="intake-error" class="error-text" role="alert" hidden></p>
            <div class="form-submit-row">
              <div class="footer-progress-card" aria-live="polite">
                <p class="footer-progress-label">Progress</p>
                <p id="footer-progress-value" class="footer-progress-value">0 / 6 sections complete</p>
              </div>
              <button id="generate-itineraries-btn" type="submit" class="primary-btn">Generate with ChatGPT 5.2</button>
            </div>
          </div>
        </form>
      </section>
    </main>

    <script type="module" src="/app.js"></script>
  </body>
  </html>
